<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      lang="en-US"
      xml:lang="en-US">
<head>
<meta charset="utf-8">
<meta http-equiv="content-type"
      content="text/html; charset=UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author"
      content="Ta Minh Lam">
<meta name="robots"
      content="noindex">
<meta name="googlebot"
      content="noindex">
<link rel="icon"
      href="../assets/warai4.ico"
      type="image/svg+xml">
<link rel="stylesheet"
      href="../assets/css/simple.min.css"
      type="text/css"/>
<script>
document.addEventListener("DOMContentLoaded", function() {
  const socket = new WebSocket("ws://0.0.0.0:8000/websocket");
  socket.addEventListener("message", (event) => {
    // var m = JSON.parse(event.data);
    console.log("Raw from server ", event.data);
    // console.log("Message from server ", m);
  });
  body = document.querySelectorAll("body")[0];
  body.addEventListener("click", function(e) {
    target = e.target;
    console.log(target.className);
    if (target.className == "button") {
      val = document.querySelector("input").value
      var s = new WebSocket("ws://0.0.0.0:8000?cmd="+ val);
      s.addEventListener("message", (event) => {
        var m = JSON.parse(event.data);
        console.log("Raw from server ", event.data);
        console.log("Message from server ", m);
        document.querySelector("#response").innerHTML = m;
      });
    }
  });
})
</script>
<style>
@font-face {
    font-family: 'Dicier';
    src:    url('../assets/fonts/dicier/Dicier-Round-Light.woff') format('woff'),
            url('../assets/fonts/dicier/Dicier-Round-Light.otf') format('truetype'),
    font-weight: normal;
    font-style: normal;
}
article { font-family: 'Dicier';
          font-size: 2em; 
          text-align: center; }
</style>
<title>WS</title>
</head>
<body>
<form>
  <label>Command</label>
  <input type="text" name="cmd">
  <a class="button">Roll</a>
</form>

<article id="response"></article>

<details>
<summary>details</summary>
<%= $url %>
</details>
</body>
</html>
